<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Composites &mdash; pyWaPOR  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/nbsphinx-code-cells.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #004747" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pyWaPOR
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../data_sources.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_pywapor_api.html">pyWaPOR API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_etlook.html">ETLook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #004747" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyWaPOR</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Composites</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://bitbucket.org///src/notebooks/2.4.1/2_composites.ipynb?mode=view" class="fa fa-bitbucket"> Edit on Bitbucket</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Composites">
<h1>Composites<a class="headerlink" href="#Composites" title="Permalink to this heading"></a></h1>
<p>In this notebook we’ll take a closer look at how <code class="docutils literal notranslate"><span class="pre">pre_et_look</span></code> works internally. To do so, we’ll be using a couple of functions that you’d normally not need to touch, because they are called automatically when you run <code class="docutils literal notranslate"><span class="pre">pywapor.pre_et_look.main</span></code>.</p>
<p>First, we’ll install pywapor in case it’s not installed yet.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span><span class="nv">pywapor</span><span class="o">==</span><span class="m">2</span>.4.1<span class="w"> </span>--quiet
</pre></div>
</div>
</div>
<p>Then we can define some of the basic parameters, that were explained in the introduction notebook. In this case we’ll look at the Fayoum region again, for a period of two months.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pywapor</span>

<span class="n">project_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;/Users/hmcoerver/pywapor_notebooks&quot;</span>
<span class="n">latlim</span> <span class="o">=</span> <span class="p">[</span><span class="mf">28.9</span><span class="p">,</span> <span class="mf">29.7</span><span class="p">]</span>
<span class="n">lonlim</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.2</span><span class="p">,</span> <span class="mf">31.2</span><span class="p">]</span>
<span class="n">startdate</span> <span class="o">=</span> <span class="s2">&quot;2021-06-01&quot;</span>
<span class="n">enddate</span> <span class="o">=</span> <span class="s2">&quot;2021-08-01&quot;</span>
</pre></div>
</div>
</div>
<p>One of the first things happening when you run <code class="docutils literal notranslate"><span class="pre">pre_et_look</span></code>, is the creation of a more precise definition of the composites (from here on also referred to as epochs) for which <code class="docutils literal notranslate"><span class="pre">pre_et_look</span></code> will prepare the data to be used by <code class="docutils literal notranslate"><span class="pre">et_look</span></code>.</p>
<p>The default value for the <code class="docutils literal notranslate"><span class="pre">composite_length</span></code> in <code class="docutils literal notranslate"><span class="pre">pywapor.pre_et_look.main</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;DEKAD&quot;</span></code>, which creates three composites per month (of roughly 10 days each), just like much of the WaPOR data. We’ll go with this default value for now. The variable <code class="docutils literal notranslate"><span class="pre">epochs_info</span></code> consists of three lists, with information on the number, startdate and enddate of each epoch.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">composite_length</span> <span class="o">=</span> <span class="s2">&quot;DEKAD&quot;</span>

<span class="n">epochs_info</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">pre_et_look</span><span class="o">.</span><span class="n">create_dates</span><span class="p">(</span><span class="n">startdate</span><span class="p">,</span> <span class="n">enddate</span><span class="p">,</span> <span class="n">composite_length</span><span class="p">)</span>

<span class="k">for</span> <span class="n">number</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">epochs_info</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Composite </span><span class="si">{</span><span class="n">number</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> starts at </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2"> and ends at </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Composite 1 starts at 2021-06-01T00:00:00.000000000 and ends at 2021-06-11T00:00:00.000000000.

Composite 2 starts at 2021-06-11T00:00:00.000000000 and ends at 2021-06-21T00:00:00.000000000.

Composite 3 starts at 2021-06-21T00:00:00.000000000 and ends at 2021-07-01T00:00:00.000000000.

Composite 4 starts at 2021-07-01T00:00:00.000000000 and ends at 2021-07-11T00:00:00.000000000.

Composite 5 starts at 2021-07-11T00:00:00.000000000 and ends at 2021-07-21T00:00:00.000000000.

Composite 6 starts at 2021-07-21T00:00:00.000000000 and ends at 2021-08-01T00:00:00.000000000.

</pre></div></div>
</div>
<p>Besides defining the epochs, <code class="docutils literal notranslate"><span class="pre">pre_et_look</span></code> also downloads data. In this example we’ll look solely at NDVI data (from MOD13 and MYD13). So let’s download some data and store it in our RAW folder.</p>
<p>With the parameters specified above, we’ll need to download five MOD13 and four MYD13 tiles of about 250MB each, so this can take a couple of minutes. If you already did the introduction and your <code class="docutils literal notranslate"><span class="pre">project_folder</span></code> is the same, some of the tiles will already exist and won’t be downloaded again.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">dl_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Dir&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">project_folder</span><span class="p">,</span> <span class="s2">&quot;RAW&quot;</span><span class="p">),</span>
            <span class="s2">&quot;latlim&quot;</span><span class="p">:</span> <span class="n">latlim</span><span class="p">,</span>
            <span class="s2">&quot;lonlim&quot;</span><span class="p">:</span> <span class="n">lonlim</span><span class="p">,</span>
            <span class="s2">&quot;Startdate&quot;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span>
            <span class="s2">&quot;Enddate&quot;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span>
            <span class="p">}</span>

<span class="n">raw_ndvi_files</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">collect</span><span class="o">.</span><span class="n">downloader</span><span class="o">.</span><span class="n">collect_sources</span><span class="p">(</span><span class="s2">&quot;ndvi&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;MOD13&quot;</span><span class="p">,</span> <span class="s2">&quot;MYD13&quot;</span><span class="p">],</span> <span class="n">dl_args</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Tile: 5 / 5: 100%|██████████| 258M/258M [05:46&lt;00:00, 743kBytes/s]
Tile: 4 / 4: 100%|██████████| 244M/244M [02:08&lt;00:00, 1.90MBytes/s]
</pre></div></div>
</div>
<p>The variable <code class="docutils literal notranslate"><span class="pre">raw_ndvi_files</span></code> is a list of lists. The first lists contains the paths to MOD13 tiles that were downloaded and the second the paths to the MYD13 files.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MOD13 files:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_ndvi_files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MYD13 files:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_ndvi_files</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MOD13 files:
[&#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MOD13/NDVI_MOD13Q1_-_16-daily_2021.06.26.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MOD13/NDVI_MOD13Q1_-_16-daily_2021.07.28.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MOD13/NDVI_MOD13Q1_-_16-daily_2021.07.12.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MOD13/NDVI_MOD13Q1_-_16-daily_2021.05.25.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MOD13/NDVI_MOD13Q1_-_16-daily_2021.06.10.tif&#39;]
MYD13 files:
[&#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MYD13/NDVI_MYD13Q1_-_16-daily_2021.06.18.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MYD13/NDVI_MYD13Q1_-_16-daily_2021.07.04.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MYD13/NDVI_MYD13Q1_-_16-daily_2021.07.20.tif&#39;, &#39;/Users/hmcoerver/pywapor_notebooks/RAW/MODIS/MYD13/NDVI_MYD13Q1_-_16-daily_2021.06.02.tif&#39;]
</pre></div></div>
</div>
<p>Now that we have defined our epochs and downloaded some data, we can create our first composites using <code class="docutils literal notranslate"><span class="pre">pywapor.general.compositer.main</span></code>. To do so, we need to define one more variable, which specifies what kind of composite we want to create. This variable, cmeta, is a dictionary with a couple of keys.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">var_name</span></code> and <code class="docutils literal notranslate"><span class="pre">var_unit</span></code> simply define the name and unit of the data we are dealing with.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spatial_interp</span></code> defines the interpolation method used to align datasets with different resolutions with eachother. Since MOD13 and MYD13 each have the same pixel-size, <code class="docutils literal notranslate"><span class="pre">spatial_interp</span></code> is not relevant here. Possible values are “nearest” or “linear”.</p></li>
<li><p>Finally, <code class="docutils literal notranslate"><span class="pre">composite_type</span></code> and <code class="docutils literal notranslate"><span class="pre">temporal_interp</span></code> will be explained in more detail below.</p></li>
</ul>
<blockquote>
<div><p>Also note that we’re passing <code class="docutils literal notranslate"><span class="pre">lean_output</span></code> as False, by doing so the output of this function will be a bit more extensive than normally, i.e. some temporary internal variables that normally get deleted, are stored and returned now, for the sake of this exercise.</p>
</div></blockquote>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmeta</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;var_name&quot;</span><span class="p">:</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">,</span>
    <span class="s2">&quot;var_unit&quot;</span><span class="p">:</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span>
    <span class="s2">&quot;spatial_interp&quot;</span><span class="p">:</span> <span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;composite_type&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;temporal_interp&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">compositer</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">cmeta</span><span class="p">,</span> <span class="n">raw_ndvi_files</span><span class="p">,</span> <span class="n">epochs_info</span><span class="p">,</span> <span class="n">lean_output</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">compositer.main</span></code> function return an xarray.Dataset object. We can inspect it my simple doing the following.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:         (epoch: 6, time: 9, lat: 408, lon: 510)
Coordinates:
  * epoch           (epoch) int64 0 1 2 3 4 5
  * time            (time) datetime64[ns] 2021-06-02 2021-06-10 ... 2021-08-05
  * lon             (lon) float64 30.2 30.2 30.2 30.21 ... 31.19 31.2 31.2 31.2
  * lat             (lat) float64 29.7 29.7 29.7 29.69 ... 28.91 28.9 28.9 28.9
    epoch_starts    (epoch) datetime64[ns] 2021-06-01 2021-06-11 ... 2021-07-21
    epoch_ends      (epoch) datetime64[ns] 2021-06-11 2021-06-21 ... 2021-08-01
Data variables:
    ndvi            (time, lat, lon) float32 0.1089 0.1065 ... 0.0798 0.0798
    sources         (time, lat, lon) float64 1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0 1.0
    epochs          (time) float64 0.0 0.0 1.0 2.0 3.0 4.0 4.0 5.0 nan
    ndvi_composite  (epoch, lat, lon) float32 0.1075 0.1055 ... 0.0828 0.0828
Attributes:
    var_name:         ndvi
    var_unit:         -
    spatial_interp:   nearest
    composite_type:   mean
    temporal_interp:  False
    1:                (&#x27;*&#x27;, &#x27;r&#x27;, 1.0, &#x27;MOD13Q1&#x27;)
    2:                (&#x27;o&#x27;, &#x27;g&#x27;, 1.0, &#x27;MYD13Q1&#x27;)
    0:                (&#x27;.&#x27;, &#x27;k&#x27;, 0.7, &#x27;Interp.&#x27;)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-314764ef-968a-4321-806e-5bb4c4b77013' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-314764ef-968a-4321-806e-5bb4c4b77013' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>epoch</span>: 6</li><li><span class='xr-has-index'>time</span>: 9</li><li><span class='xr-has-index'>lat</span>: 408</li><li><span class='xr-has-index'>lon</span>: 510</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-9c7c4152-00c5-4231-a88e-e890b91e46ff' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9c7c4152-00c5-4231-a88e-e890b91e46ff' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>epoch</span></div><div class='xr-var-dims'>(epoch)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5</div><input id='attrs-ff2a58b1-13e9-4038-ac06-47663b6ba81c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ff2a58b1-13e9-4038-ac06-47663b6ba81c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9dade016-17d9-4390-9a4c-e044ebc38ab2' class='xr-var-data-in' type='checkbox'><label for='data-9dade016-17d9-4390-9a4c-e044ebc38ab2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4, 5])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2021-06-02 ... 2021-08-05</div><input id='attrs-768a2935-d995-4ba0-9ed4-14bd523c4ee2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-768a2935-d995-4ba0-9ed4-14bd523c4ee2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d627ded9-6272-499a-9353-42d2c2cd53a3' class='xr-var-data-in' type='checkbox'><label for='data-d627ded9-6272-499a-9353-42d2c2cd53a3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2021-06-02T00:00:00.000000000&#x27;, &#x27;2021-06-10T00:00:00.000000000&#x27;,
       &#x27;2021-06-18T00:00:00.000000000&#x27;, &#x27;2021-06-26T00:00:00.000000000&#x27;,
       &#x27;2021-07-04T00:00:00.000000000&#x27;, &#x27;2021-07-12T00:00:00.000000000&#x27;,
       &#x27;2021-07-20T00:00:00.000000000&#x27;, &#x27;2021-07-28T00:00:00.000000000&#x27;,
       &#x27;2021-08-05T00:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>30.2 30.2 30.2 ... 31.2 31.2 31.2</div><input id='attrs-375d80d3-2653-4ff2-9cff-4b1f0f5643ff' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-375d80d3-2653-4ff2-9cff-4b1f0f5643ff' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-342588b0-e0f0-4d2d-a703-be17ef9b5b4f' class='xr-var-data-in' type='checkbox'><label for='data-342588b0-e0f0-4d2d-a703-be17ef9b5b4f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([30.199456, 30.201422, 30.203387, ..., 31.195899, 31.197864, 31.19983 ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>29.7 29.7 29.7 ... 28.9 28.9 28.9</div><input id='attrs-37122f43-b94c-4249-87f7-38c5695d285e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-37122f43-b94c-4249-87f7-38c5695d285e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-db1c357d-e9ea-4611-baac-d384f7d0517c' class='xr-var-data-in' type='checkbox'><label for='data-db1c357d-e9ea-4611-baac-d384f7d0517c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([29.700281, 29.698316, 29.69635 , ..., 28.904306, 28.902341, 28.900375])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>epoch_starts</span></div><div class='xr-var-dims'>(epoch)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2021-06-01 ... 2021-07-21</div><input id='attrs-07bc5c3b-559e-4d64-9cad-d3a7167ee3c6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-07bc5c3b-559e-4d64-9cad-d3a7167ee3c6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-82d8e8fb-3005-4976-9cc9-c8b9ffe9cc40' class='xr-var-data-in' type='checkbox'><label for='data-82d8e8fb-3005-4976-9cc9-c8b9ffe9cc40' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2021-06-01T00:00:00.000000000&#x27;, &#x27;2021-06-11T00:00:00.000000000&#x27;,
       &#x27;2021-06-21T00:00:00.000000000&#x27;, &#x27;2021-07-01T00:00:00.000000000&#x27;,
       &#x27;2021-07-11T00:00:00.000000000&#x27;, &#x27;2021-07-21T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>epoch_ends</span></div><div class='xr-var-dims'>(epoch)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2021-06-11 ... 2021-08-01</div><input id='attrs-5b8a6503-7478-4a6d-857b-181935a90ecf' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5b8a6503-7478-4a6d-857b-181935a90ecf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c359ade9-01f0-4de7-9960-3013940225b5' class='xr-var-data-in' type='checkbox'><label for='data-c359ade9-01f0-4de7-9960-3013940225b5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2021-06-11T00:00:00.000000000&#x27;, &#x27;2021-06-21T00:00:00.000000000&#x27;,
       &#x27;2021-07-01T00:00:00.000000000&#x27;, &#x27;2021-07-11T00:00:00.000000000&#x27;,
       &#x27;2021-07-21T00:00:00.000000000&#x27;, &#x27;2021-08-01T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-76a83f32-97a1-4d9a-9ab5-8b0e7091e332' class='xr-section-summary-in' type='checkbox'  checked><label for='section-76a83f32-97a1-4d9a-9ab5-8b0e7091e332' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>ndvi</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.1089 0.1065 ... 0.0798 0.0798</div><input id='attrs-6944d6cf-5ee4-430c-9325-576bad5337b3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6944d6cf-5ee4-430c-9325-576bad5337b3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0418a1e7-089f-4213-9b4f-e589ab208f35' class='xr-var-data-in' type='checkbox'><label for='data-0418a1e7-089f-4213-9b4f-e589ab208f35' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>sources :</span></dt><dd>[&#x27;MOD13Q1&#x27;, &#x27;MYD13Q1&#x27;]</dd></dl></div><div class='xr-var-data'><pre>array([[[0.1089, 0.1065, 0.1017, ..., 0.0935, 0.0978, 0.1079],
        [0.1028, 0.1082, 0.1058, ..., 0.1096, 0.1096, 0.1973],
        [0.1038, 0.1084, 0.1084, ..., 0.1109, 0.1898, 0.2142],
        ...,
        [0.0869, 0.0824, 0.0824, ..., 0.0747, 0.0775, 0.0773],
        [0.0889, 0.0831, 0.0831, ..., 0.0747, 0.0755, 0.077 ],
        [0.0868, 0.0867, 0.0823, ..., 0.0769, 0.0769, 0.0769]],

       [[0.1061, 0.1044, 0.1039, ..., 0.0884, 0.0884, 0.1308],
        [0.1038, 0.1076, 0.1075, ..., 0.1016, 0.1016, 0.1397],
        [0.1067, 0.1076, 0.1075, ..., 0.0984, 0.1703, 0.2181],
        ...,
        [0.0861, 0.0849, 0.0849, ..., 0.076 , 0.074 , 0.0698],
        [0.0853, 0.0848, 0.0848, ..., 0.0772, 0.071 , 0.0709],
        [0.0871, 0.0868, 0.0837, ..., 0.0737, 0.0741, 0.0741]],

       [[0.1031, 0.105 , 0.1017, ..., 0.1011, 0.1025, 0.1082],
        [0.1012, 0.1145, 0.1075, ..., 0.1198, 0.1198, 0.1614],
        [0.1025, 0.1045, 0.1075, ..., 0.1333, 0.1608, 0.2019],
        ...,
...
        [0.0877, 0.0834, 0.0822, ..., 0.0776, 0.0782, 0.079 ],
        [0.0857, 0.0807, 0.0807, ..., 0.0758, 0.0785, 0.0798],
        [0.0891, 0.0864, 0.08  , ..., 0.0785, 0.0801, 0.0801]],

       [[0.1036, 0.1056, 0.1045, ..., 0.0833, 0.0812, 0.1047],
        [0.1067, 0.1074, 0.1088, ..., 0.1083, 0.1083, 0.1906],
        [0.1067, 0.1071, 0.1083, ..., 0.1055, 0.1103, 0.1726],
        ...,
        [0.086 , 0.0858, 0.0847, ..., 0.0826, 0.0831, 0.0743],
        [0.0846, 0.0846, 0.0846, ..., 0.0867, 0.0831, 0.0739],
        [0.0882, 0.0872, 0.0837, ..., 0.0862, 0.0828, 0.0828]],

       [[0.1103, 0.1075, 0.1069, ..., 0.0984, 0.1245, 0.1612],
        [0.1051, 0.1046, 0.1015, ..., 0.1301, 0.1301, 0.1626],
        [0.1072, 0.1049, 0.1037, ..., 0.1329, 0.1473, 0.2083],
        ...,
        [0.0913, 0.087 , 0.0844, ..., 0.0774, 0.0774, 0.0791],
        [0.0873, 0.0873, 0.0873, ..., 0.0757, 0.0791, 0.0771],
        [0.0947, 0.0947, 0.089 , ..., 0.0789, 0.0798, 0.0798]]],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sources</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0 1.0</div><input id='attrs-97c06d10-2fda-4a90-b21b-a1e5361b833d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-97c06d10-2fda-4a90-b21b-a1e5361b833d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5dc674f9-050a-4852-814c-0b09162768c0' class='xr-var-data-in' type='checkbox'><label for='data-5dc674f9-050a-4852-814c-0b09162768c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[[1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        ...,
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.]],

       [[2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.],
        ...,
        [2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.]],

       [[1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        ...,
...
        ...,
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.]],

       [[2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.],
        ...,
        [2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.],
        [2., 2., 2., ..., 2., 2., 2.]],

       [[1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        ...,
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.],
        [1., 1., 1., ..., 1., 1., 1.]]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>epochs</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 1.0 2.0 3.0 4.0 4.0 5.0 nan</div><input id='attrs-8aa9e687-804c-4b4c-8352-e145c3a33e82' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8aa9e687-804c-4b4c-8352-e145c3a33e82' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a21ba10-1b67-4ef1-b0fd-ba3d66b956f2' class='xr-var-data-in' type='checkbox'><label for='data-2a21ba10-1b67-4ef1-b0fd-ba3d66b956f2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 0.,  0.,  1.,  2.,  3.,  4.,  4.,  5., nan])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ndvi_composite</span></div><div class='xr-var-dims'>(epoch, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.1075 0.1055 ... 0.0828 0.0828</div><input id='attrs-a2a54fdd-e83e-41d7-97fe-27cee19ffad2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a2a54fdd-e83e-41d7-97fe-27cee19ffad2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-37484c84-ee9b-47b2-b1eb-6c095820f906' class='xr-var-data-in' type='checkbox'><label for='data-37484c84-ee9b-47b2-b1eb-6c095820f906' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>sources :</span></dt><dd>[&#x27;MOD13Q1&#x27;, &#x27;MYD13Q1&#x27;]</dd></dl></div><div class='xr-var-data'><pre>array([[[0.1075    , 0.10545   , 0.1028    , ..., 0.09095   ,
         0.0931    , 0.11935   ],
        [0.1033    , 0.1079    , 0.10665   , ..., 0.1056    ,
         0.1056    , 0.1685    ],
        [0.10525   , 0.108     , 0.10795   , ..., 0.10465   ,
         0.18005   , 0.21615   ],
        ...,
        [0.0865    , 0.08365   , 0.08365   , ..., 0.07535   ,
         0.07575   , 0.07355   ],
        [0.0871    , 0.08395   , 0.08395   , ..., 0.07595   ,
         0.07325   , 0.07395   ],
        [0.08695   , 0.08675   , 0.083     , ..., 0.0753    ,
         0.0755    , 0.0755    ]],

       [[0.1031    , 0.105     , 0.1017    , ..., 0.1011    ,
         0.1025    , 0.1082    ],
        [0.1012    , 0.1145    , 0.1075    , ..., 0.1198    ,
         0.1198    , 0.1614    ],
        [0.1025    , 0.1045    , 0.1075    , ..., 0.1333    ,
         0.1608    , 0.2019    ],
...
        [0.08845   , 0.08475   , 0.08355   , ..., 0.0799    ,
         0.07975   , 0.08050001],
        [0.08735   , 0.0832    , 0.0832    , ..., 0.07955   ,
         0.0809    , 0.08075   ],
        [0.08985   , 0.0885    , 0.0829    , ..., 0.0759    ,
         0.07675   , 0.07675   ]],

       [[0.1036    , 0.1056    , 0.1045    , ..., 0.0833    ,
         0.0812    , 0.1047    ],
        [0.1067    , 0.1074    , 0.1088    , ..., 0.1083    ,
         0.1083    , 0.1906    ],
        [0.1067    , 0.1071    , 0.1083    , ..., 0.1055    ,
         0.1103    , 0.1726    ],
        ...,
        [0.086     , 0.0858    , 0.0847    , ..., 0.0826    ,
         0.0831    , 0.0743    ],
        [0.0846    , 0.0846    , 0.0846    , ..., 0.0867    ,
         0.0831    , 0.0739    ],
        [0.0882    , 0.0872    , 0.0837    , ..., 0.0862    ,
         0.0828    , 0.0828    ]]], dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-53804702-4370-42a2-a036-29d5b0b7281f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-53804702-4370-42a2-a036-29d5b0b7281f' class='xr-section-summary' >Attributes: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>var_name :</span></dt><dd>ndvi</dd><dt><span>var_unit :</span></dt><dd>-</dd><dt><span>spatial_interp :</span></dt><dd>nearest</dd><dt><span>composite_type :</span></dt><dd>mean</dd><dt><span>temporal_interp :</span></dt><dd>False</dd><dt><span>1 :</span></dt><dd>(&#x27;*&#x27;, &#x27;r&#x27;, 1.0, &#x27;MOD13Q1&#x27;)</dd><dt><span>2 :</span></dt><dd>(&#x27;o&#x27;, &#x27;g&#x27;, 1.0, &#x27;MYD13Q1&#x27;)</dd><dt><span>0 :</span></dt><dd>(&#x27;.&#x27;, &#x27;k&#x27;, 0.7, &#x27;Interp.&#x27;)</dd></dl></div></li></ul></div></div></div>
</div>
<p>You’ll see a couple of things here:</p>
<ul class="simple">
<li><p>First of all, the dimensions of this dataset.</p></li>
<li><p>Next the different coordinates of the variables.</p></li>
<li><p>Then a list of data variables and their respective dimensions. For example, the variable <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> is a 3-dimensional datacube. This variable contains all the original pixel values from the geoTIFFs we’ve downloaded earlier. Check that the size of <code class="docutils literal notranslate"><span class="pre">time</span></code> is 9, which equals 5 (MOD13) + 4 (MYD13).</p></li>
<li><p>Finally, there is an attribute section, which stores some metadata on this dataset.</p></li>
</ul>
<p>It’s quite easy to plot data inside xarray.Dataset object. For example we can create a map of one of the composites we have created (the first epoch in this case).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">qm</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">ndvi_composite</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">epoch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_2.4.1_2_composites_17_0.png" src="../../_images/notebooks_2.4.1_2_composites_17_0.png" />
</div>
</div>
<p>Next, we can have a closer look at the composites we’ve created, by defining a dictionary with points-of-interest (POI). Here we’ll just add one point to the dictionary and name it “Agriculture”, since this point is situated in an agricultural area and we’ll also add a dot on the previously created map to see where this point is situated.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">diagnostics</span> <span class="o">=</span> <span class="p">{</span> <span class="c1"># label          # lat      # lon</span>
                <span class="s2">&quot;Agriculture&quot;</span><span class="p">:</span>      <span class="p">(</span><span class="mf">29.32301</span><span class="p">,</span>      <span class="mf">30.77599</span><span class="p">),</span>
              <span class="p">}</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">qm</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">qm</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">ndvi_composite</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">epoch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">qm</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
<span class="k">for</span> <span class="n">poi_name</span><span class="p">,</span> <span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span> <span class="ow">in</span> <span class="n">diagnostics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="n">poi_name</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7fb3c42f2eb0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_2.4.1_2_composites_19_1.png" src="../../_images/notebooks_2.4.1_2_composites_19_1.png" />
</div>
</div>
<p>Now we can plot a timeseries of the NDVI at this POI.</p>
<blockquote>
<div><p>In case you define more POIs, you might also want define an output folder (trough the keyword argument out_folder), as this will make sure the different plots get saved as png-files.</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">plot_composite</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">band_name</span> <span class="o">=</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_2.4.1_2_composites_21_0.png" src="../../_images/notebooks_2.4.1_2_composites_21_0.png" />
</div>
</div>
<p>In the graph we have just created, you should see a couple of things. First of all, there are red-stars and green-dots that show available NDVI measurements at our POI, coming from MOD13 and MYD13 respectively. Then there are blue bars that show the composite pixel values at this location. Since our composites are dekadal, the width of the bars is about 10 days (check the x-axis).</p>
<p>Each composite value is the mean of the available measurements within the respective epoch. For example, most of the bars match with some of the red-stars or green-dots. While the first bar, ranging from June 1st till June 11th is exactly in between two measurements, i.e. it’s the mean of the two available measurements.</p>
<p>The composite type is defined using the keyword <code class="docutils literal notranslate"><span class="pre">composite_type</span></code> in the cmeta variable. Possible values are <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;max&quot;</span></code> or a float value to calculate a percentile (the percentile option is significantly more computationally heavy than the others).</p>
<p>Now let’s adjust our <code class="docutils literal notranslate"><span class="pre">composite_length</span></code> to create 6-day composites (instead of dekadal) and see what happens.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">composite_length</span> <span class="o">=</span> <span class="mi">6</span>

<span class="n">epochs_info</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">pre_et_look</span><span class="o">.</span><span class="n">create_dates</span><span class="p">(</span><span class="n">startdate</span><span class="p">,</span> <span class="n">enddate</span><span class="p">,</span> <span class="n">composite_length</span><span class="p">)</span>
<span class="k">for</span> <span class="n">number</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">epochs_info</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Composite </span><span class="si">{</span><span class="n">number</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> starts at </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2"> and ends at </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Composite 1 starts at 2021-06-01 00:00:00 and ends at 2021-06-07 00:00:00.

Composite 2 starts at 2021-06-07 00:00:00 and ends at 2021-06-13 00:00:00.

Composite 3 starts at 2021-06-13 00:00:00 and ends at 2021-06-19 00:00:00.

Composite 4 starts at 2021-06-19 00:00:00 and ends at 2021-06-25 00:00:00.

Composite 5 starts at 2021-06-25 00:00:00 and ends at 2021-07-01 00:00:00.

Composite 6 starts at 2021-07-01 00:00:00 and ends at 2021-07-07 00:00:00.

Composite 7 starts at 2021-07-07 00:00:00 and ends at 2021-07-13 00:00:00.

Composite 8 starts at 2021-07-13 00:00:00 and ends at 2021-07-19 00:00:00.

Composite 9 starts at 2021-07-19 00:00:00 and ends at 2021-07-25 00:00:00.

Composite 10 starts at 2021-07-25 00:00:00 and ends at 2021-07-31 00:00:00.

Composite 11 starts at 2021-07-31 00:00:00 and ends at 2021-08-06 00:00:00.

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">compositer</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">cmeta</span><span class="p">,</span> <span class="n">raw_ndvi_files</span><span class="p">,</span> <span class="n">epochs_info</span><span class="p">,</span> <span class="n">lean_output</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">plot_composite</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">band_name</span> <span class="o">=</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_2.4.1_2_composites_25_0.png" src="../../_images/notebooks_2.4.1_2_composites_25_0.png" />
</div>
</div>
<p>In the new graph, you’ll see that the blue bars have become smaller (i.e. less wide), since our epochs are now shorter. As a result, some composites could not be created, because no NDVI measurements were available during that respective epoch. For example, the fourth composite (ranging between 2021-06-19 00:00:00 and 2021-06-25 00:00:00) is missing.</p>
<p>We solve this by applying a temporal interpolation between the available measurements. This is especially suitable for this data, because the MOD13 and MYD13 datasets itself are 16-daily composites, i.e. their measurements can be considered valid for a 16-day period.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmeta</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;composite_type&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;temporal_interp&quot;</span><span class="p">:</span> <span class="s2">&quot;linear&quot;</span><span class="p">,</span>
    <span class="s2">&quot;spatial_interp&quot;</span><span class="p">:</span> <span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;var_name&quot;</span><span class="p">:</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">,</span>
    <span class="s2">&quot;var_unit&quot;</span><span class="p">:</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">compositer</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">cmeta</span><span class="p">,</span> <span class="n">raw_ndvi_files</span><span class="p">,</span> <span class="n">epochs_info</span><span class="p">,</span> <span class="n">lean_output</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">plot_composite</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">band_name</span> <span class="o">=</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/notebooks_2.4.1_2_composites_28_0.png" src="../../_images/notebooks_2.4.1_2_composites_28_0.png" />
</div>
</div>
<p>The two composites that were previously missing are now there! You can see that interpolation points (in black) have appeared in the graph. Note that although here we are looking at one pixel, these interpolations are done for the entire domain.</p>
<p>Possible values for temporal_interp are <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;zero&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;slinear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;quadratic&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;cubic&quot;</span></code>. But be aware that some of these can be computationally heavy, as you can see when combining a cubic <code class="docutils literal notranslate"><span class="pre">temporal_interp</span></code> with a percentile <code class="docutils literal notranslate"><span class="pre">composite_type</span></code>.</p>
<blockquote>
<div><p>⚠️</p>
<p>This will take some time (and the fans on your computer might start blowing)!</p>
<p>⚠️</p>
</div></blockquote>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cmeta</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;composite_type&quot;</span><span class="p">:</span> <span class="mf">0.75</span><span class="p">,</span>
    <span class="s2">&quot;temporal_interp&quot;</span><span class="p">:</span> <span class="s2">&quot;cubic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;spatial_interp&quot;</span><span class="p">:</span> <span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
    <span class="s2">&quot;var_name&quot;</span><span class="p">:</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">,</span>
    <span class="s2">&quot;var_unit&quot;</span><span class="p">:</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">pywapor</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">compositer</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">cmeta</span><span class="p">,</span> <span class="n">raw_ndvi_files</span><span class="p">,</span> <span class="n">epochs_info</span><span class="p">,</span> <span class="n">lean_output</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">pywapor</span><span class="o">.</span><span class="n">post_et_look</span><span class="o">.</span><span class="n">plot_composite</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">band_name</span> <span class="o">=</span> <span class="s2">&quot;ndvi&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, FAO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>